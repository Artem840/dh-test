(this["webpackJsonpdh-test"]=this["webpackJsonpdh-test"]||[]).push([[0],{209:function(e,t,n){},211:function(e,t,n){"use strict";n.r(t);var r,c,a,i=n(0),o=n.n(i),s=n(20),u=n.n(s),d=n(68),l=n(42),j=n.n(l),f=n(53),b=n(40),h=function e(t,n){var r=[];if(t.forEach((function(t,c){if(t.id===n)r.push(c);else if(t.children&&t.children.length>0){var a=e(t.children,n);a&&(r.push(c),r.push.apply(r,Object(d.a)(a)))}})),r.length>0)return r},p=Object(b.b)("content/fetchContentList",Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://164.90.161.80:3000/api","/content")).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),O=Object(b.b)("content/fetchContentItem",function(){var e=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://164.90.161.80:3000/api","/content?dirId=").concat(t)).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x=Object(b.c)({name:"content",initialState:{data:[],isLoading:!0,error:""},reducers:{},extraReducers:function(e){e.addCase(p.pending,(function(e){e.isLoading=!0})).addCase(p.fulfilled,(function(e,t){e.data=Object(d.a)(t.payload.children),e.isLoading=!1})).addCase(p.rejected,(function(e,t){e.isLoading=!1,e.error=t.error.message})).addCase(O.fulfilled,(function(e,t){var n=h(e.data,t.payload.id);if(n)if(n.length>1){for(var r=e.data,c=0;c<n.length-1;c++)r=0===c?r[n[c]]:r.children[n[c]];r.children[n[n.length-1]]=t.payload}else e.data[n[0]]=t.payload}))}}),v=function(e){return e.content},g=x.reducer,m=n(55),w=function(){return Object(m.b)()},k=m.c,y=n(69),C=n(70),F=n(216),L=n(114),I=Object(C.a)(F.a)(r||(r=Object(y.a)(["\n    border-bottom: 1px solid rgb(235, 237, 240);\n"]))),S=C.a.div(c||(c=Object(y.a)(["\n  color: ",";\n  cursor: pointer;\n  margin-left: ","px;\n  pointer-events: ",";\n"])),(function(e){return e.isFile?"red":"blue"}),(function(e){return 8*e.level}),(function(e){return e.isFile&&"none"})),E=Object(C.a)(L.Content)(a||(a=Object(y.a)(["\n  width: 100%;\n  max-width: 290px;\n  margin: 100px auto 0;\n"]))),J=n(215),_=n(217),z=n(50),B=n(82),D=n(10),H=function(e){var t=e.dataItem,n=e.level,r=w(),c=Object(i.useState)(!1),a=Object(B.a)(c,2),o=a[0],s=a[1],u=Object(i.useState)(!1),d=Object(B.a)(u,2),l=d[0],h=d[1],p=t.id,x=t.title,v=t.children,g=void 0!==v&&v.length>0,m=function(){var e=Object(f.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=19;break}return e.prev=1,h(!0),e.next=5,r(O(t));case 5:n=e.sent,Object(b.d)(n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Failed to fetch content: ",e.t0),h(!1);case 13:return e.prev=13,h(!1),s(!0),e.finish(13);case 17:e.next=20;break;case 19:s(!o);case 20:case"end":return e.stop()}}),e,null,[[1,9,13,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsxs)(S,{"data-level":"".concat(n,"_").concat(p),level:n,isFile:!v,children:[l&&Object(D.jsx)(J.a,{}),Object(D.jsx)("span",{onClick:function(){return m(p)},children:x}),o&&g&&Object(D.jsx)(M,{data:v,level:n+1})]},"".concat(n,"_").concat(p))},M=function(e){var t=e.data,n=e.level;return Object(D.jsx)(D.Fragment,{children:t.map((function(e){return Object(D.jsx)(H,{dataItem:e,level:n},e.id)}))})},R=function(){var e=k(v),t=e.data,n=e.isLoading,r=e.error;return n?Object(D.jsx)(J.a,{size:"large"}):r?Object(D.jsx)(_.a,{message:r,type:"error"}):t?Object(D.jsx)(M,{data:t,level:0}):Object(D.jsx)(z.a,{description:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"})},T=function(){var e=w();return Object(i.useEffect)((function(){e(p())}),[e]),Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(I,{title:"DH Test"}),Object(D.jsx)(E,{children:Object(D.jsx)(R,{})})]})},q=(n(208),n(209),Object(b.a)({reducer:{content:g}}));u.a.render(Object(D.jsx)(o.a.StrictMode,{children:Object(D.jsx)(m.a,{store:q,children:Object(D.jsx)(T,{})})}),document.getElementById("root"))}},[[211,1,2]]]);
//# sourceMappingURL=main.2f4655a7.chunk.js.map